<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Log to a Memory Buffer — AppenderBuffer • lgr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Log to a Memory Buffer — AppenderBuffer" />

<meta property="og:description" content="An Appender that Buffers LogEvents in-memory and and redirects them to other
Appenders once certain conditions are met." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lgr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/lgr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/lgr-simple.html">lgr-simple</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/s-fleck/lgr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Log to a Memory Buffer</h1>
    <small class="dont-index">Source: <a href='https://github.com/s-fleck/lgr/blob/master/R/Appender.R'><code>R/Appender.R</code></a></small>
    <div class="hidden name"><code>AppenderBuffer.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>An Appender that Buffers LogEvents in-memory and and redirects them to other
Appenders once certain conditions are met.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    <pre>
x &lt;- x$new(threshold = NA_integer_, layout = LayoutFormat$new(fmt = "%L [%t]
  %m", timestamp_fmt = "%H:%M:%S", colors = getOption("lgr.colors")),
  appenders = NULL, buffer_size = 1000, flush_threshold = "fatal",
  flush_on_exit = TRUE, flush_on_rotate = TRUE,
  should_flush = default_should_flush, filters = NULL)
    x$flush()
x$set_appenders(x)
x$add_appender(appender, name = NULL)
x$remove_appender(pos)
x$append(event)
x$set_buffer_size(x)
x$set_should_flush(x)
x$set_flush_on_exit(x)
x$set_flush_on_rotate(x)
x$set_flush_threshold(level)
x$show(threshold = NA_integer_, n = 20L)
x$set_threshold(level)
x$set_layout(layout)
x$filter(event)
x$add_filter(filter, name = NULL)
x$remove_filter(pos)
x$set_filters(filters)
    x$appenders
x$destination
x$buffer_df
x$buffer_dt
x$buffer_events
x$buffer_size
x$flush_on_exit
x$flush_on_rotate
x$flush_threshold
x$should_flush
x$layout
x$threshold
x$filters
    </pre>
    
    <h2 class="hasAnchor" id="creating-a-buffer-appender"><a class="anchor" href="#creating-a-buffer-appender"></a>Creating a Buffer Appender</h2>

    
    <p>The <a href='Layout.html'>Layout</a> for this Appender is used only to format console output of
its <code>$show()</code> method.</p>
    
    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    
    <dl class='dl-horizontal'>
<dt><code>appenders</code>, <code>set_appenders()</code></dt><dd><p>Like for a <a href='Logger.html'>Logger</a>. Buffered events
will be passed on to these Appenders once a flush is triggered</p></dd>
<dt><code>flush_on_exit, set_flush_on_exit(x)</code></dt><dd><p><code>TRUE</code> or <code>FALSE</code>: Whether the
buffer should be flushed when the Appender is garbage collected (f.e when
you close <span style="R">R</span>)</p></dd>
<dt><code>flush_on_rotate, set_flush_on_rotate</code></dt><dd><p><code>TRUE</code> or <code>FALSE</code>: Whether
the buffer should be flushed when the Buffer is full (f.e when you close
<span style="R">R</span>). Setting this to off can have slightly negative performance impacts.</p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>buffer_size, set_buffer_size(x)</code></dt><dd><p><code>integer</code> scalar <code>&gt;= 0</code> Number of
<a href='LogEvent.html'>LogEvents</a> to buffer.</p></dd>
    <dt><code>buffer_events</code>, <code>buffer_df</code>, <code>buffer_dt</code></dt><dd><p>The contents of the buffer as a <code>list</code> of <a href='LogEvent.html'>LogEvents</a>, a
<code>data.frame</code> or a <code>data.table</code>.</p></dd>
    <dt><code>flush_threshold</code>, <code>set_flush_threshold()</code></dt><dd><p><code>integer</code> or <code>character</code>
<a href='get_log_levels.html'>log level</a>. Minimum event level that will trigger flushing of
the buffer. This behaviour is implemented through <code>should_flush()</code>,
and you can modify that function for different behaviour.</p></dd>
<dt><code>should_flush(event)</code>, <code>set_should_flush(x)</code></dt><dd><p>A function with exactly one arguments: <code>event</code>.
If the function returns <code>TRUE</code>, flushing of the buffer
is triggered. Defaults to flushing if an event of level <code>error</code>
or higher is registered.</p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>dt</code></dt><dd><p>Get the log recorded by this <code>Appender</code> as a <code>data.table</code>
with a maximum of <code>buffer_size</code> rows</p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>data</code></dt><dd><p>Get the log recorded by this <code>Appender</code> as a <code>data.frame</code></p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>threshold</code>, <code>set_threshold(level)</code></dt><dd><p><code>character</code> or <code>integer</code> scalar.
The minimum log level that triggers this logger. See <a href='get_log_levels.html'>log_levels</a></p></dd>
<dt><code>layout</code>, <code>set_layout(layout)</code></dt><dd><p>a <code>Layout</code> that will be used for
formatting the <code>LogEvents</code> passed to this Appender</p></dd>
<dt><code>destination</code></dt><dd><p>The output destination of the <code>Appender</code> in
human-readable form (mainly for print output)</p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>filters</code>, <code>set_filters(filters)</code></dt><dd><p>a <code>list</code> that may contain
<code>functions</code> or any <span style="R">R</span> object with a <code><a href='https://www.rdocumentation.org/packages/stats/topics/filter'>filter()</a></code> method. These functions
must have exactly one argument: <code>event</code> which will get passed the
LogEvent when the Filterable's <code><a href='https://www.rdocumentation.org/packages/stats/topics/filter'>filter()</a></code> method is invoked.
If all of these functions evaluate to <code>TRUE</code> the LogEvent is passed on.
Since LogEvents have reference semantics, filters can also be abused to
modify them before they are passed on. Look at the source code of
<code><a href='with_log_level.html'>with_log_level()</a></code> or <code><a href='with_log_level.html'>with_log_value()</a></code> for examples.</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
    <dl class='dl-horizontal'>
<dt><code><a href='https://www.rdocumentation.org/packages/base/topics/connections'>flush()</a></code></dt><dd><p>Manually trigger flushing</p></dd>
    <dt><code><a href='simple_logging.html'>add_appender(appender, name = NULL)</a></code>, <code><a href='simple_logging.html'>remove_appender(pos)</a></code></dt><dd><p>Add or remove an <a href='Appender.html'>Appender</a>. Supplying a <code>name</code> is optional but
recommended. After adding an Appender with
<code>appender$add_appender(AppenderConsole$new(), name = "console")</code> you can
refer to it via <code>appender$appenders$console</code>. <code><a href='simple_logging.html'>remove_appender()</a></code> can
remove an Appender by position or name.</p></dd>
    </dl>
    <dl class='dl-horizontal'>
<dt><code><a href='https://www.rdocumentation.org/packages/base/topics/connections'>flush()</a></code></dt><dd><p>Manually trigger flushing of the buffer</p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code>show(n, threshold)</code></dt><dd><p>Show the last <code>n</code> log entries with a log level
bellow <code>threshold</code>. The log entries will be formatted for console output
via this Appenders <a href='Layout.html'>Layout</a></p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code><a href='https://www.rdocumentation.org/packages/base/topics/append'>append(event)</a></code></dt><dd><p>Tell the Appender to process a <a href='LogEvent.html'>LogEvent</a> <code>event</code>.
This method is usually not called by the user, but invoked by a
<a href='Logger.html'>Logger</a></p></dd>
</dl>
    <dl class='dl-horizontal'>
<dt><code><a href='https://www.rdocumentation.org/packages/stats/topics/filter'>filter(event)</a></code></dt><dd><p>Determine whether the LogEvent <code>x</code> should be passed
on to Appenders (<code>TRUE</code>) or not (<code>FALSE</code>). See also the active binding
<code>filters</code></p></dd>
<dt><code>add_filter(filter, name = NULL)</code>, <code>remove_filter(pos)</code></dt><dd><p>Add or remove a filter. When adding a filter an optional <code>name</code> can
be specified. <code>remove_filter()</code> can remove by position or name (if one
was specified)</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="comparison-appenderbuffer-and-appenderdt"><a class="anchor" href="#comparison-appenderbuffer-and-appenderdt"></a>Comparison AppenderBuffer and AppenderDt</h2>

    
    <p>Both AppenderBuffer and <a href='AppenderDt.html'>AppenderDt</a> do in memory buffering of events.
AppenderBuffer retains a copies of the events it processes and has the
ability to pass the buffered events on to other Appenders. AppenderDt
converts the events to rows in a <code>data.table</code> and is a bit harder to
configure. Used inside loops (several hundred iterations),
AppenderDt has much less overhead than AppenderBuffer. For single logging
calls and small loops, AppenderBuffer is more performant. This is related to
how memory pre-allocation is handled by the appenders.</p>
<p>In short: Use AppenderDt if you want an in-memory log for interactive use,
and AppenderBuffer if you actually want to buffer events</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='LayoutFormat.html'>LayoutFormat</a></p>
<p>Other Appenders: <code><a href='AppenderConsole.html'>AppenderConsole</a></code>,
  <code><a href='AppenderDbi.html'>AppenderDbi</a></code>, <code><a href='AppenderFile.html'>AppenderFile</a></code>,
  <code><a href='AppenderGmail.html'>AppenderGmail</a></code>, <code><a href='AppenderJson.html'>AppenderJson</a></code>,
  <code><a href='AppenderPushbullet.html'>AppenderPushbullet</a></code>,
  <code><a href='AppenderRjdbc.html'>AppenderRjdbc</a></code>,
  <code><a href='AppenderSendmail.html'>AppenderSendmail</a></code>,
  <code><a href='AppenderTable.html'>AppenderTable</a></code>, <code><a href='Appender.html'>Appender</a></code></p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#usage">Usage</a></li>

      <li><a href="#creating-a-buffer-appender">Creating a Buffer Appender</a></li>

      <li><a href="#fields">Fields</a></li>

      <li><a href="#methods">Methods</a></li>

      <li><a href="#comparison-appenderbuffer-and-appenderdt">Comparison AppenderBuffer and AppenderDt</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Stefan Fleck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

